###########################################################################################################
# USE THIS FILE TO OVERWRITE THE DEFAULT COMMON NAMES IF REQUIRED FOR CERTAIN APPLICATIONS
#
# DEFAULT COMMON NAMING FORMAT IS: <bd/epg>_<application>_<function>_<environment> (AFE FORMAT)
###########################################################################################################

- name: OVERWRITE COMMON NAMES FOR MSSQLV1 CASE TO AEF
  block:

    - name: SET BD/EPG/ANP NAMES FOR MSSQLV1
      set_fact:
        # SET NAMES TO <bd/epg>_<application>_<environment>_<function> (AEF FORMAT)
        # FOR INSTANCE: epg_mssqlv1_prd_sdipsql9999
        bd_name: "bd_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }}"
        epg_name: "epg_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }}"
        # SET CORRECT ANP TO USE FOR MSSQLV1
        anp_name: "anp_mssqlv1_dbserver"

    - name: SET FIREWALL OBJECT NAME FOR MSSQLV1
      set_fact:
      # SET FIREWALL OBJECT NAME TO <bd/epg>_<application>_<environment>_<function> (AEF FORMAT)
        obj_name: "bd_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }} - {{ subnet | replace('/','_') }}"
      when: subnet is defined and subnet is not none and subnet | length > 0

  when: "'mssqlv1' in application"

- name: OVERWRITE APPLICATION FOR NETWORK CONTAINER LOOKUP FOR MSSQLV1 AOC
  set_fact:
    # FORCE THE NETWORK CONTAINER TO USE TO mssqlv1_aoc
    application: "mssqlv1_aoc"
  when: "'mssqlv1' in application and 'aoc' in function"

- name: OVERWRITE COMMON NAMES FOR OPENSHIFT CASE TO AEF
  block:

    - name: SET BD/EPG/ANP NAMES FOR OPENSHIFT
      set_fact:
        # SET NAMES TO <bd/epg>_<application>_<environment>_<function> (AEF FORMAT)
        # FOR INSTANCE: epg_openshift_prd_master
        bd_name: "bd_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }}"
        epg_name: "epg_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }}"
        anp_name: "anp_{{ application }}"

    - name: SET FIREWALL OBJECT NAME FOR MSSQLV1
      set_fact:
      # SET FIREWALL OBJECT NAME TO <bd/epg>_<application>_<environment>_<function> (AEF FORMAT)
        obj_name: "bd_{{ application }}_{{ cust_environment }}{{ '_' + function if function is defined and function | length > 0 else '' }} - {{ subnet | replace('/','_') }}"
      when: subnet is defined and subnet is not none and subnet | length > 0

  when: "'openshift' in application"